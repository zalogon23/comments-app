{"version":3,"sources":["scripts/context/AuthProvider.js","scripts/context/SearchProvider.js","scripts/components/SearchBar.js","scripts/components/Header.js","scripts/pages/Home.js","scripts/logic/checkLoginToRedirect.js","scripts/pages/Login.js","scripts/logic/uploadImage.js","scripts/components/AvatarPicker.js","scripts/components/ProfileInfoEditor.js","scripts/pages/Profile.js","scripts/pages/Register.js","scripts/components/AddComment.js","scripts/components/EditComment.js","scripts/components/Comment.js","scripts/components/EditTopic.js","scripts/pages/Topic.js","scripts/pages/TopicAll.js","scripts/pages/TopicCreate.js","scripts/pages/TopicSearched.js","scripts/pages/Topics.js","scripts/pages/Enemies.js","scripts/pages/Users.js","scripts/routes/PrivateRoute.js","scripts/routes/PublicRoute.js","scripts/pages/SendReset.js","scripts/pages/ResetPass.js","scripts/routes/AllRoutes.js","App.js","index.js"],"names":["authContext","createContext","AuthProvider","children","hasSiteCookie","document","cookie","split","indexOf","useState","logged","user","setUser","useEffect","fetch","then","res","json","result","data","catch","err","console","log","Provider","value","searchContext","SearchProvider","pathname","useLocation","search","setSearch","slice","SearchBar","placeholder","className","useContext","setGlobalSearch","history","useHistory","onChange","e","target","type","onClick","preventDefault","length","push","Header","path","method","client","removeQueries","to","activeClassName","exact","Home","checkLoginToRedirect","id","error","replace","Login","username","setUsername","password","setPassword","wrong","setWrong","from","state","headers","body","JSON","stringify","userData","cause","openImagePicker","querySelector","click","AvatarPicker","open","setOpen","avatarImageEl","useRef","fetching","setFetching","form","ref","src","profile_image","alt","name","files","userImage","image","blobImage","Blob","url","URL","createObjectURL","updateProfileImage","current","undefined","accept","imageData","FormData","forms","refetchQueries","alert","finally","ProfileInfoEditor","edit","setEdit","profileInfo","setProfileInfo","info","profile_info","exitEditMode","Profile","queryResult","useQuery","isSuccess","isLoading","isError","Register","email","setEmail","AddComment","addChild","setCommentMode","setCommenting","answerContent","EditComment","editComment","setEditMode","Comment","source","commentMode","content","setContent","editMode","showChildComments","setShowChildComments","setAnswerContent","parse","childComments","setChildComments","commenting","activeElement","blur","focus","author","authorName","topic","parent","toggleChildCommentsVisibility","filter","comment","aria-hidden","map","child","EditTopic","setIntro","editorValue","setEditorValue","Topic","setTopic","intro","mainComment","setMainComment","resTopic","resComments","comments","subject","toUpperCase","TopicAll","topics","rate","rating","TopicCreate","setSubject","formattedIntro","text","charAt","TopicSearched","queryKey","isFetching","Topics","component","Enemies","enabled","friend","Users","useRouteMatch","params","anotherUser","cacheTime","friends","includes","toggleFriend","PrivateRoute","props","location","PublicRoute","SendReset","done","setDone","ResetPass","searchParams","URLSearchParams","algo","resetKey","get","AllRoutes","QueryClient","App","QueryClientProvider","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.8c72678c.chunk.js","sourcesContent":["import React, { createContext, useState, useEffect } from 'react';\r\n\r\nexport const authContext = createContext();\r\n\r\nfunction AuthProvider({ children }) {\r\n  let hasSiteCookie = false;\r\n  for (const cookiePair of document.cookie.split(\";\")) {\r\n    if (cookiePair.indexOf(\"connect.sid\") === 0) hasSiteCookie = true;\r\n  }\r\n  const [user, setUser] = useState({ logged: hasSiteCookie });\r\n\r\n  useEffect(() => {\r\n    if(user.logged){\r\n      fetch(\"/api/profile\")\r\n      .then(res => res.json())\r\n      .then(result => setUser({logged: true, ...result.data}))\r\n      .catch(err => { if (err) console.log(err) })\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    <authContext.Provider value={[user, setUser]}>\r\n      {children}\r\n    </authContext.Provider>\r\n  )\r\n}\r\n\r\nexport default AuthProvider;\r\n","import React, { createContext, useState } from 'react';\r\nimport { useLocation, useRouteMatch } from 'react-router-dom';\r\n\r\nexport const searchContext = createContext();\r\n\r\nfunction SearchProvider({ children }) {\r\n  const { pathname } = useLocation();\r\n  const [search, setSearch] = useState(\"\");\r\n  if(search === \"\" && pathname.indexOf(\"/topics/search/\") === 0) setSearch(pathname.slice(15));\r\n\r\n  return (\r\n    <searchContext.Provider value={[search, setSearch]}>\r\n      {children}\r\n    </searchContext.Provider>\r\n  )\r\n}\r\n\r\nexport default SearchProvider;\r\n\r\n\r\n","import React, { useContext, useState } from 'react'\r\nimport { useHistory } from 'react-router-dom';\r\nimport { client } from '../../App';\r\nimport { searchContext } from '../context/SearchProvider';\r\n\r\nfunction SearchBar({ placeholder, className }) {\r\n\r\n  const [ search, setSearch ] = useState(\"\");\r\n  const [ globalSearch, setGlobalSearch ] = useContext(searchContext);\r\n  const history = useHistory();\r\n\r\n  return (\r\n    <form>\r\n      <input value={search} onChange={ e => setSearch(e.target.value)} type=\"text\" {...{placeholder}} />\r\n      <button onClick={searchForTopic} {...{className}}><i className=\"fas fa-search\"></i></button>\r\n    </form>\r\n  )\r\n  function searchForTopic(e){\r\n    e.preventDefault();\r\n    if(!(search.length)) return;\r\n    history.push(\"/topics/search/\" + search);\r\n    setGlobalSearch(search);\r\n    setSearch(\"\");\r\n  }\r\n}\r\n\r\nexport default SearchBar\r\n","import React, { useContext } from \"react\";\r\nimport { NavLink, Link, useLocation, useHistory } from \"react-router-dom\";\r\nimport { client } from \"../../App\";\r\nimport { authContext } from \"../context/AuthProvider\";\r\nimport SearchBar from \"./SearchBar\";\r\n\r\nfunction Header() {\r\n\r\n  const [user, setUser] = useContext(authContext);\r\n  const { pathname: path } = useLocation();\r\n  const history = useHistory();\r\n\r\n  return (\r\n    <header className=\"main-header\">\r\n      {path.indexOf(\"/login\") !== 0 && (user.logged ?\r\n        <button onClick={logout} className=\"logout\">Log Out</button>\r\n        :\r\n        <Link to=\"/login\" className=\"login\">Log In</Link>)\r\n      }\r\n      <h1 className=\"title\">COMMENTS APP</h1>\r\n      <div className=\"comment\">\r\n      <SearchBar className=\"add add-main\" placeholder=\"Look for a topic!\" />\r\n      </div>\r\n      <nav>\r\n        <ul>\r\n          <NavLink activeClassName=\"here\" exact to=\"/\">Home</NavLink>\r\n          <NavLink activeClassName=\"here\" to=\"/profile\">Profile</NavLink>\r\n          <NavLink activeClassName=\"here\" to=\"/topics\">Topics</NavLink>\r\n          <NavLink activeClassName=\"here\" to=\"/enemies\">Enemies</NavLink>\r\n        </ul>\r\n      </nav>\r\n    </header>\r\n  )\r\n\r\n  function logout() {\r\n    fetch(\"/api/logout\", {\r\n      method: \"POST\"\r\n    })\r\n      .then(res => res.json())\r\n      .then(result => {\r\n        setUser({ logged: false });\r\n        console.log(result);\r\n        client.removeQueries();\r\n        history.push(\"/\")\r\n      })\r\n      .catch(err => { if(err) console.log(err) })\r\n  }\r\n}\r\n\r\nexport default Header;","import React from \"react\";\r\n\r\nfunction Home() {\r\n  return (\r\n    <>\r\n      <main className=\"home\">\r\n        <div className=\"content\">\r\n          <h2 className=\"title\">Prepare to discuss</h2>\r\n          <p className=\"intro\">\r\n            Este sitio fue ideado con la premisa de que a todos les gusta hablar mal de algo.\r\n            Y debido a lo comun que es, he considerado necesario declararlo como un Derecho Humano,\r\n            el derecho de quejarse de todo. Por lo anterior, esta plataforma simplemente se presenta\r\n            como un medio de descarga emocional, y... por que no (en el mejor de los casos) como punto\r\n            de discusiones constructivas y tertulias amenas.\r\n          </p>\r\n          <div className=\"random\">\r\n            <span>Random Discussion</span><button className=\"go-to-comments\">Join</button>\r\n          </div>\r\n        </div>\r\n      </main>\r\n      {/* <section className=\"hottest-topics\">\r\n        <article className=\"topic\">Games</article>\r\n        <article className=\"topic\">War</article>\r\n        <article className=\"topic\">Heroes</article>\r\n        <article className=\"topic\">Religion</article>\r\n      </section> */}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Home;","function checkLoginToRedirect(user, history) {\r\n  if (user.id) return;\r\n  fetch(\"api/profile\", {\r\n    method: \"GET\"\r\n  })\r\n    .then(res => res.json())\r\n    .then(user => {\r\n      console.log(user);\r\n      if (user.error) return;\r\n      if (!(user.id + 100)) return;\r\n      history.replace(\"/\");\r\n    })\r\n}\r\n\r\nexport default checkLoginToRedirect","import React, { useContext, useEffect, useState } from 'react'\r\nimport { useHistory, useLocation, Link } from 'react-router-dom';\r\nimport { authContext } from \"../context/AuthProvider\"\r\nimport checkLoginToRedirect from '../logic/checkLoginToRedirect';\r\n\r\nfunction Login() {\r\n\r\n  const [user, setUser] = useContext(authContext);\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [ wrong, setWrong ] = useState(\"\");\r\n  const { from } = useLocation().state || { from: { pathname: \"/\" } };\r\n  const history = useHistory();\r\n  useEffect(() => {\r\n    checkLoginToRedirect(user, history);\r\n  }, []);\r\n\r\n  return (\r\n    <main className=\"login-form\">\r\n      <h3 className=\"title\">Login</h3>\r\n      <form>\r\n        <input onChange={(e) => setUsername(e.target.value)} value={username} type=\"text\" className={`username ${wrong === \"username\" && \"error-primary\"}`} placeholder=\"Username\" />\r\n        <input onChange={(e) => setPassword(e.target.value)} value={password} type=\"password\" className={`password ${wrong === \"password\" && \"error-primary\"}`} placeholder=\"Password\" />\r\n        <button onClick={login} className=\"login\">Login</button>\r\n      </form>\r\n      <div className=\"register-now\">      \r\n        <span> Have not an account yet? </span><Link to=\"/register\">Sign In</Link>\r\n      </div>\r\n      <div className=\"reset\">      \r\n        <span> Forgot your password </span><Link to=\"/reset\">Reset</Link>\r\n      </div>\r\n    </main>\r\n  )\r\n\r\n  function login(e) {\r\n    e.preventDefault();\r\n    fetch(\"api/login\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Accept\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({ username, password })\r\n    })\r\n      .then(res => res.json())\r\n      .then(userData => {\r\n        if (!userData.error) {\r\n          setUser({ ...userData.data, logged: true });\r\n          console.log(userData);\r\n          history.replace(from);\r\n          return\r\n        }\r\n        if(userData.cause === \"username\"){\r\n          setWrong(\"username\");\r\n        }\r\n        if(userData.cause === \"password\"){\r\n          setWrong(\"password\");\r\n        }\r\n      })\r\n      .catch(err => { if (err) console.log(err) })\r\n  }\r\n}\r\n\r\n\r\nexport default Login\r\n","function openImagePicker() {\r\n  document.querySelector(\".image-picker-input\").click();\r\n}\r\n\r\nfunction updateProfileImage(e, userImage){\r\n  const image = e.target.files[0];\r\n  if(image.type === \"image/svg+xml\") return; //Filter\r\n  const blobImage = new Blob([image]);\r\n  const url = URL.createObjectURL(blobImage);\r\n  userImage.src = url;\r\n}\r\n\r\nexport { openImagePicker, updateProfileImage };\r\n","import React, { useRef, useState } from 'react'\r\nimport { client } from '../../App';\r\nimport { openImagePicker, updateProfileImage } from '../logic/uploadImage';\r\n\r\nfunction AvatarPicker({ user, setUser }) {\r\n\r\n  const [open, setOpen] = useState(false);\r\n  const avatarImageEl = useRef();\r\n  const [fetching, setFetching] = useState(false);\r\n  const form = useRef();\r\n\r\n  return (\r\n    <>\r\n      <form ref={form}>\r\n        <div className=\"avatar-section\">\r\n          <img ref={avatarImageEl} onClick={openImagePicker} className=\"image-picker\" src={user.profile_image} alt=\"Profile\" />\r\n          <i className=\"fas fa-camera change-image\"></i>\r\n          <input name=\"avatar\" onChange={toggleImageOnClient} className=\"image-picker-input\" accept=\"image/*\" type=\"file\" />\r\n          {fetching && <p className=\"loading\">The image is uploading</p>}\r\n        </div>\r\n        {open &&\r\n          <div className=\"image-actions\">\r\n            <button className=\"confirmUpdateImage\" onClick={sendUpdatedProfileImage}><i className=\"fas fa-check yes\"></i></button>\r\n            <button className=\"cancelUpdateImage\" onClick={cancelImagePicker}><i className=\"fas fa-times\"></i></button>\r\n          </div>\r\n        }\r\n      </form>\r\n    </>\r\n  )\r\n\r\n  function toggleImageOnClient(e) {\r\n    if (e.target.files[0]) updateProfileImage(e, avatarImageEl.current);\r\n    setOpen(true);\r\n    if (e.target.files[0] === undefined) {\r\n      avatarImageEl.current.src = user.profile_image;\r\n      setOpen(false);\r\n    }\r\n  }\r\n\r\n  function cancelImagePicker() {\r\n    setOpen(false);\r\n    avatarImageEl.current.src = user.profile_image;\r\n    if (document.querySelector(\".image-picker-input\")) document.querySelector(\".image-picker-input\").value = \"\";\r\n  }\r\n\r\n  function sendUpdatedProfileImage(e) {\r\n    e.preventDefault();\r\n    const imageData = new FormData(form.current);\r\n    console.log(document.forms[1]);\r\n    setFetching(true);\r\n    fetch(\"/api/profile/avatar\", {\r\n      method: \"PUT\",\r\n      body: imageData\r\n    })\r\n      .then(res => res.json())\r\n      .then(result => {\r\n        setUser({ ...user, profile_image: result.path });\r\n        client.refetchQueries(\"userdata\"); //Destroy the results of global User for refreshing\r\n      })\r\n      .catch(err => alert(err))\r\n      .finally(() => {\r\n        setOpen(false);\r\n        setFetching(false);\r\n      })\r\n  }\r\n}\r\n\r\nexport default AvatarPicker\r\n","import React, { useState } from 'react'\r\nimport { client } from '../../App';\r\n\r\nfunction ProfileInfoEditor({ user, setUser }) {\r\n\r\n  const [edit, setEdit] = useState(false);\r\n  const [profileInfo, setProfileInfo] = useState(\"\");\r\n\r\n  return (\r\n    <div className=\"info\">\r\n      {!edit ?\r\n        <>\r\n          <p>{user.profile_info}</p>\r\n          <button onClick={openEditMode} className=\"edit\">Edit</button>\r\n        </>\r\n        :\r\n        <>\r\n          <textarea onChange={(e) => setProfileInfo(e.target.value)} className=\"set-personal-info\" value={profileInfo} />\r\n          <div className=\"actions\">\r\n            <button onClick={updateProfileInfo} className=\"set\">Set</button>\r\n            <button onClick={exitEditMode} className=\"cancel\">Cancel</button>\r\n          </div>\r\n        </>\r\n      }\r\n    </div>\r\n  )\r\n\r\n  function exitEditMode() {\r\n    setEdit(false);\r\n  }\r\n\r\n  function openEditMode() {\r\n    setEdit(true);\r\n    setProfileInfo(user.profile_info);\r\n  }\r\n\r\n  function updateProfileInfo() {\r\n    fetch(\"/api/profile/info\", {\r\n      method: \"PUT\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Accept\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({\r\n        info: profileInfo\r\n      })\r\n    })\r\n      .then(res => res.json())\r\n      .then(result => {\r\n        setUser({ ...user, profile_info: result.data });\r\n        exitEditMode();\r\n        client.removeQueries();\r\n      })\r\n      .catch(err => {\r\n        if (err) {\r\n          console.log(err);\r\n        }\r\n      })\r\n  }\r\n}\r\n\r\nexport default ProfileInfoEditor\r\n","import React, { useEffect, useContext } from 'react';\r\nimport { authContext } from '../context/AuthProvider';\r\nimport { useQuery } from \"react-query\";\r\nimport AvatarPicker from '../components/AvatarPicker';\r\nimport ProfileInfoEditor from '../components/ProfileInfoEditor';\r\n\r\nfunction Profile() {\r\n\r\n  const [user, setUser] = useContext(authContext);\r\n  const queryResult = useQuery(\"userdata\", () => fetch(\"/api/profile\").then(res => res.json()));\r\n\r\n  useEffect(() => {\r\n    if (queryResult.isSuccess) setUser({ ...user, ...queryResult.data.data });\r\n  }, []);\r\n\r\n  return (\r\n    <main className=\"profile\">\r\n      {queryResult.isLoading ?\r\n        <div className=\"loading\">It is loading...</div>\r\n        :\r\n        queryResult.isError ?\r\n          <div className=\"error\">There was an error fetching. Please log out and try again</div>\r\n          :\r\n          <>\r\n            <AvatarPicker {...{user, setUser}} />\r\n            <div className=\"content\">\r\n              <h3 className=\"name\">{user.username}</h3>\r\n              <ProfileInfoEditor {...{ user, setUser }} />\r\n              {/* <div style={{ display: \"none\" }} className=\"trophies\">\r\n                <div className=\"trophy speaker\">M</div>\r\n                <div className=\"trophy devil\">M</div>\r\n                <div className=\"trophy badass\">M</div>\r\n              </div> */}\r\n            </div>\r\n          </>\r\n      }\r\n    </main>\r\n  )\r\n}\r\n\r\nexport default Profile\r\n","import React, { useContext, useState, useEffect } from 'react'\r\nimport { useHistory } from 'react-router-dom';\r\nimport { authContext } from \"../context/AuthProvider\"\r\nimport checkLoginToRedirect from '../logic/checkLoginToRedirect';\r\n\r\nfunction Register() {\r\n\r\n  const history = useHistory();\r\n  const [ user ] = useContext( authContext );\r\n  const [ wrong, setWrong ] = useState(\"\");\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [fetching, setFetching] = useState(false);\r\n  useEffect(() => {\r\n    checkLoginToRedirect(user, history);\r\n  }, []);\r\n\r\n  return (\r\n    <main className=\"register-form\">\r\n      <h3 className=\"title\">Register</h3>\r\n      <form>\r\n        <input onChange={(e) => setUsername(e.target.value)} type=\"text\" className={`username ${wrong === \"username\" && \"error-primary\"}`} placeholder=\"Username\" value={username}/>\r\n        <input onChange={(e) => setPassword(e.target.value)} type=\"password\" className={`password ${wrong === \"password\" && \"error-primary\"}`} placeholder=\"Password\"  value={password}/>\r\n        <input onChange={(e) => setEmail(e.target.value)} type=\"email\" className={`email ${wrong === \"email\" && \"error-primary\"}`} placeholder=\"Email\"  value={email}/>\r\n        <button onClick={register} className=\"register\">Register</button>\r\n      </form>\r\n    </main>\r\n  )\r\n\r\n  function register(e) {\r\n    if(fetching) return;\r\n    setFetching(true);\r\n    e.preventDefault();\r\n    fetch(\"api/register\", {\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json'\r\n      },\r\n      method: \"POST\",\r\n      body: JSON.stringify({ username, password, email })}\r\n    )\r\n    .then(res => res.json())\r\n    .then(result => {\r\n      console.log(result);\r\n      if(!result.error){\r\n        history.replace(\"/login\");\r\n        return;\r\n      }\r\n      if(result.cause === \"username\"){\r\n        setWrong(\"username\");\r\n      }\r\n      if(result.cause === \"password\"){\r\n        setWrong(\"password\");\r\n      }\r\n      if(result.cause === \"email\"){\r\n        setWrong(\"email\");\r\n      }\r\n    })\r\n    .catch(err => {\r\n      console.log(err)\r\n      if(err) console.log(\"No se pudo enviar la data...\")\r\n    })\r\n    .finally(() => setFetching(false))\r\n  }\r\n}\r\n\r\n\r\nexport default Register\r\n","import React from 'react'\r\n\r\nfunction AddComment({ ref, addChild, setCommentMode, setCommenting, answerContent, onChange }) {\r\n  return (\r\n    <>\r\n      <input ref={ref} value={answerContent} type=\"text\" className=\"answer-comment\" onChange={onChange} />\r\n      <button onClick={addChild} className=\"send-answer-comment\">Send</button>\r\n      <button onClick={() => {\r\n        setCommentMode(false);\r\n        setCommenting(false);\r\n      }} className=\"abort-answer-comment\">&times;</button>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default AddComment\r\n","import React from 'react'\r\n\r\nfunction EditComment({ ref, editComment, setEditMode, setCommenting, answerContent, onChange }) {\r\n  return (\r\n    <>\r\n      <input ref={ref} value={answerContent} type=\"text\" className=\"answer-comment\" onChange={onChange} />\r\n      <button onClick={editComment} className=\"send-answer-comment\"><i className=\"fas fa-check yes\"></i></button>\r\n      <button onClick={() => {\r\n        setEditMode(false);\r\n        setCommenting(false);\r\n      }} className=\"abort-answer-comment\">&times;</button>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default EditComment\r\n","import React, { useContext, useEffect, useRef, useState } from 'react'\r\nimport { useHistory, Link } from 'react-router-dom';\r\nimport { authContext } from '../context/AuthProvider';\r\nimport AddComment from './AddComment';\r\nimport EditComment from './EditComment';\r\n\r\nfunction Comment({ source }) {\r\n\r\n  const [commentMode, setCommentMode] = useState(false);\r\n  const [ content, setContent ] = useState(source.content);\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [showChildComments, setShowChildComments] = useState(false);\r\n  const [answerContent, setAnswerContent] = useState(\"\");\r\n  const [user] = useContext(authContext);\r\n  const [childComments, setChildComments] = useState(JSON.parse(source.children));\r\n  const { commenting, setCommenting } = source;\r\n  const history = useHistory();\r\n\r\n  const ref = useRef();\r\n\r\n\r\n  useEffect(() => {\r\n    document.activeElement.blur();\r\n    if (ref.current) ref.current.focus();\r\n  }, [commentMode])\r\n\r\n  return (\r\n    <article className={`comment ${source.id}`}>\r\n      <Link className=\"author\" to={source.author === user.id ? \"/profile\" : `/users/${source.author}`}>{source.authorName}</Link>\r\n      {editMode ?\r\n        <EditComment {...{ editComment, ref, answerContent, setEditMode, setCommenting }} onChange={e => setAnswerContent(e.target.value)} />\r\n        :\r\n        <>\r\n          <p className=\"content\">\r\n            {content}\r\n          </p>\r\n          <ul className=\"actions\">\r\n            {commentMode ?\r\n              <AddComment {...{ addChild, ref, answerContent, setCommentMode, setCommenting }} onChange={e => setAnswerContent(e.target.value)} />\r\n              :\r\n              <>\r\n                {!!childComments.length &&\r\n                  <button onClick={toggleChildCommentsVisibility} className=\"see-more\">...</button>\r\n                }\r\n                <button onClick={() => {\r\n                  if (commenting) return;\r\n                  if (!user.logged) history.push(\"/login\");\r\n                  setCommentMode(true);\r\n                  setCommenting(true);\r\n                }} className=\"answer\">+</button>\r\n\r\n                {user.id === source.author &&\r\n                  <button onClick={() => {\r\n                    if (commenting) return;\r\n                    setEditMode(true);\r\n                    setCommenting(true);\r\n                  }} className=\"answer\"><i className=\"fas fa-edit\"></i></button>}\r\n              </>\r\n            }\r\n            {user.id === source.author && <button onClick={(e) => deleteComment(e, source.id)} className=\"delete\"><i className=\"fa fa-trash\" aria-hidden=\"true\"></i></button>}\r\n          </ul>\r\n        </>\r\n      }\r\n      <ol className=\"children\">\r\n        {!!childComments.length && showChildComments &&\r\n          childComments.map(child => <Comment key={child.id + 1000000000} source={{ ...child, childComments, setChildComments, commenting, setCommenting }} />)\r\n        }\r\n      </ol>\r\n    </article>\r\n  )\r\n\r\n  function deleteComment(e, id) {\r\n\r\n    source.setChildComments(source.childComments.filter(comment => comment.id !== id));\r\n\r\n    fetch(\"/api/comment\", {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Accept\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({ id })\r\n    })\r\n      .then(res => res.json())\r\n      .then(result => console.log(result))\r\n      .catch(err => { if (err) console.log(err) })\r\n      .finally(() => { if (!document.querySelector(\".answer-comment\")) setCommenting(false) })\r\n  }\r\n\r\n  function addChild(e) {\r\n    setCommentMode(false);\r\n    setCommenting(false);\r\n    setAnswerContent(\"\");\r\n    fetch(\"/api/comment/\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Accept\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({\r\n        topic: source.topic,\r\n        content: answerContent,\r\n        parent: source.id\r\n      })\r\n    })\r\n      .then(res => res.json())\r\n      .then(result => {\r\n        setChildComments([...childComments, { ...result.data, authorName: user.username}]);\r\n        if (!showChildComments) toggleChildCommentsVisibility();\r\n      })\r\n      .catch(err => { if (err) console.log(err) })\r\n  }\r\n\r\n  function editComment(e) {\r\n    setCommenting(false);\r\n    setAnswerContent(\"\");\r\n    fetch(\"/api/comment/\", {\r\n      method: \"PUT\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Accept\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({\r\n        content: answerContent,\r\n        id: source.id\r\n      })\r\n    })\r\n      .then(res => res.json())\r\n      .then(result => {\r\n        console.log(result);\r\n        setEditMode(false);\r\n        setContent(answerContent);\r\n      })\r\n      .catch(err => { if (err) console.log(err) })\r\n  }\r\n\r\n  function toggleChildCommentsVisibility() {\r\n    if (showChildComments === false) {\r\n      fetch(`/api/comment/${source.id}`)\r\n        .then(res => res.json())\r\n        .then(result => setChildComments(result))\r\n        .catch(err => console.log(err))\r\n        .finally(() => setShowChildComments(true))\r\n      return;\r\n    }\r\n    setShowChildComments(false);\r\n  }\r\n}\r\n\r\nexport default Comment\r\n","import React, { useState } from 'react'\r\n\r\nfunction EditTopic({ value, id, setEditMode, setIntro }) {\r\n\r\n  const [editorValue, setEditorValue] = useState(value);\r\n\r\n  return (\r\n    <>\r\n      <textarea onChange={(e) => setEditorValue(e.target.value)} value={editorValue} />\r\n      <div className=\"edit-actions\">\r\n        <button onClick={editTopic} className=\"confirm\">Yes</button>\r\n        <button onClick={() => setEditMode(false)} className=\"cancel\">No</button>\r\n      </div>\r\n    </>\r\n  )\r\n\r\n  function editTopic() {\r\n    fetch(\"/api/topics/\", {\r\n      method: \"PUT\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Accept\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({\r\n        content: editorValue,\r\n        id\r\n      })\r\n    })\r\n      .then(res => res.json())\r\n      .then(() => {\r\n        setIntro(editorValue);\r\n        setEditorValue(\"\")\r\n        setEditMode(false);\r\n      })\r\n      .catch(err => { if (err) console.log(err) })\r\n  }\r\n}\r\n\r\nexport default EditTopic\r\n","import React, { useEffect, useState, useContext } from 'react';\r\nimport { useHistory, useLocation } from 'react-router';\r\nimport Comment from '../components/Comment';\r\nimport EditTopic from '../components/EditTopic';\r\nimport { authContext } from '../context/AuthProvider';\r\n\r\nfunction Topic() {\r\n\r\n  const location = useLocation();\r\n  const { pathname } = location;\r\n  const [user] = useContext(authContext);\r\n  const [wrong, setWrong] = useState(\"\");\r\n  let [topic, setTopic] = useState(\"\");\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [ intro, setIntro ] = useState(\"\");\r\n  const history = useHistory();\r\n  let [childComments, setChildComments] = useState([]);\r\n  const [commenting, setCommenting] = useState(false);\r\n  const [mainComment, setMainComment] = useState(\"\");\r\n  useEffect(() => {\r\n    console.log(\"/api\" + pathname);\r\n    fetch(\"/api\" + pathname)\r\n      .then(res => res.json())\r\n      .then(result => {\r\n        const { topic: resTopic, comments: resComments } = result;\r\n        setIntro(result.topic.intro)\r\n        setTopic(resTopic);\r\n        setChildComments(resComments);\r\n        console.log(resTopic);\r\n      })\r\n      .catch(err => { if (err) console.log(err) })\r\n  }, [])\r\n\r\n  return (\r\n    <>\r\n      {\r\n        (topic.subject && topic.intro) ?\r\n          <>\r\n            <main className=\"topic\">\r\n              <h3 className=\"title\">{topic.subject[0].toUpperCase() + topic.subject.slice(1)}</h3>\r\n              {editMode ?\r\n                <EditTopic value={topic.intro} id={topic.id} {...{ editMode, setEditMode, setIntro }} />\r\n                :\r\n                <>\r\n                  <p className=\"intro\">\r\n                    {intro}\r\n                    <button onClick={() => setEditMode(true)} className=\"edit-topic\"><i className=\"fas fa-edit\"></i></button>\r\n                  </p>\r\n                </>\r\n              }\r\n            </main>\r\n            <article className=\"actions\">\r\n              <input type=\"text\" className={`comment-content ${wrong === \"main\" && \"error-primary\"}`} onChange={(e) => setMainComment(e.target.value)} value={mainComment} />\r\n              <button className=\"add-comment\" onClick={addMainComment}>+</button>\r\n            </article>\r\n            <section className=\"comments\">\r\n              {childComments.map(comment => <Comment key={comment.id + 10000000} source={{ ...comment, childComments, setChildComments, commenting, setCommenting }} />\r\n              )\r\n              }\r\n            </section>\r\n          </>\r\n          :\r\n          <p>Loading...</p>\r\n      }\r\n    </>\r\n  )\r\n\r\n  function addMainComment() {\r\n\r\n    if (!user.logged) history.push(\"/login\");\r\n\r\n    if (!(mainComment.length)) {\r\n      setWrong(\"main\");\r\n      return;\r\n    }\r\n\r\n    setWrong(\"\");\r\n\r\n    fetch(\"/api/comment\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Accept\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({\r\n        topic: topic.id,\r\n        parent: null,\r\n        content: mainComment\r\n      })\r\n    })\r\n      .then(res => res.json())\r\n      .then(result => {\r\n        setMainComment(\"\");\r\n        setChildComments([...childComments, { ...result.data, authorName: user.username }]);\r\n      })\r\n      .catch(err => console.log(err))\r\n  }\r\n}\r\n\r\nexport default Topic\r\n","import React, { useContext } from 'react'\r\nimport { useQuery } from 'react-query';\r\nimport { Link } from \"react-router-dom\"\r\nimport { client } from '../../App';\r\nimport { authContext } from '../context/AuthProvider';\r\n\r\nfunction TopicAll() {\r\n\r\n  const [user] = useContext(authContext);\r\n  const topics = useQuery(\"topics\", () => fetch(\"/api/topics\").then(res => res.json()));\r\n  console.log(topics);\r\n\r\n  return (\r\n    <>\r\n      {\r\n        user.logged &&\r\n        <section className=\"create-topic\">\r\n          <Link to=\"/topics/create\" className=\"add-topic\">Add a new topic!</Link>\r\n        </section>\r\n      }\r\n      < main className=\"topics\" >\r\n        {\r\n          topics.isLoading ?\r\n            <div> Loading... </div>\r\n            :\r\n            topics.isError ?\r\n              <div> There was an error, please refresh </div>\r\n              :\r\n              <>\r\n                {topics.data.data.map(topic =>\r\n                  <article key={topic.id} className={`topic ${topic.id}`}>\r\n                    <Link to={`/topics/${topic.id}`} >\r\n                      <div className=\"rating\">{\r\n                        [1, 2, 3, 4, 5].map(rate => rate <= topic.rating ? <i key={rate} className=\"fas fa-star\"></i> : <i key={rate + 100} className=\"far fa-star\"></i>)\r\n                      }</div>\r\n                      <h3 className=\"title\">{topic.subject[0].toUpperCase() + topic.subject.slice(1)}</h3>\r\n                      <p className=\"content\">\r\n                        {topic.intro}\r\n                      </p>\r\n                      <h4 className=\"founder\">{topic.authorName}</h4>\r\n                    </Link>\r\n                    {topic.author === user.id && <button onClick={() => deleteTopic(topic.id)} className=\"delete\"><i className=\"fa fa-trash\" aria-hidden=\"true\" /></button>}\r\n                  </article>\r\n                )}\r\n              </>\r\n        }\r\n      </main >\r\n    </>\r\n  )\r\n\r\n  function deleteTopic(id) {\r\n    fetch(\"/api/topics\", {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Accept\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({ id })\r\n    })\r\n      .then(res => res.json())\r\n      .then(result => {\r\n        console.log(result);\r\n        client.refetchQueries(\"topics\");\r\n      })\r\n      .catch(err => console.log(err))\r\n  }\r\n}\r\n\r\nexport default TopicAll\r\n","import React, { useState } from 'react';\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction TopicCreate() {\r\n\r\n  const [ subject, setSubject ] = useState(\"\");\r\n  const [ intro, setIntro ] = useState(\"\");\r\n  const history = useHistory();\r\n \r\n  return (\r\n    <main className=\"create-topic\">\r\n      <h3 className=\"title\">What topic would you like to create?</h3>\r\n      <form className=\"topic-info\">\r\n        <input placeholder=\"Topic's title\" type=\"text\" className=\"subject\" value={subject} onChange={ e => setSubject(e.target.value)}/>\r\n        <textarea placeholder=\"A small introduction...\" className=\"intro\" value={intro} onChange={ e => setIntro(e.target.value)}></textarea>\r\n        <button className=\"create\" onClick={sendNewTopic}>Create!</button>\r\n      </form>\r\n    </main>\r\n  )\r\n\r\n  function sendNewTopic(e){\r\n    e.preventDefault();\r\n    if(!subject.length || !intro.length) return;\r\n    const formattedIntro = formatText(intro);\r\n    const topic = { subject, intro: formattedIntro };\r\n    fetch(\"/api/topics\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Accept\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({ ...topic })\r\n    })\r\n    .then(res => res.json())\r\n    .then(result => {\r\n      console.log(result);   \r\n      setIntro(\"\");\r\n      setSubject(\"\");\r\n      history.push(\"/topics\");\r\n    })\r\n    .catch(err => console.log(err))\r\n  }\r\n\r\n  function formatText(text){\r\n    return text.charAt(0).toUpperCase() + text.slice(1);\r\n  }\r\n}\r\n\r\nexport default TopicCreate\r\n","import React, { useContext } from 'react'\r\nimport { useQuery } from 'react-query';\r\nimport { Link } from 'react-router-dom'\r\nimport { client } from '../../App';\r\nimport { authContext } from '../context/AuthProvider';\r\nimport { searchContext } from '../context/SearchProvider';\r\n\r\nfunction TopicSearched() {\r\n\r\n  const [globalSearch] = useContext(searchContext);\r\n  const search = globalSearch;\r\n  const [user] = useContext(authContext);\r\n\r\n  const topics = useQuery([\"searchedTopics\", { search }], ({ queryKey }) => {\r\n    const [key, { search }] = queryKey;\r\n    return fetch(`/api/topics/search/${search}`).then(res => res.json());\r\n  })\r\n\r\n  console.log(topics);\r\n\r\n  return (\r\n    <main className=\"topics\">\r\n      {\r\n        topics.isFetching ?\r\n          <p>It is loading</p>\r\n          :\r\n          topics.isError ?\r\n            <p>There was an error, please try another topic</p>\r\n            :\r\n            !!topics.data.data.length ?\r\n              <>\r\n                {topics.data.data.map(topic =>\r\n                  <article key={topic.id} className={`topic ${topic.id}`}>\r\n                    <Link to={`/topics/${topic.id}`} >\r\n                      <div className=\"rating\">{\r\n                        [1, 2, 3, 4, 5].map(rate => rate <= topic.rating ? <i key={rate} className=\"fas fa-star\"></i> : <i key={rate + 100} className=\"far fa-star\"></i>)\r\n                      }</div>\r\n                      <h3 className=\"title\">{topic.subject[0].toUpperCase() + topic.subject.slice(1)}</h3>\r\n                      <p className=\"content\">\r\n                        {topic.intro}\r\n                      </p>\r\n                      <h4 className=\"founder\">{topic.authorName}</h4>\r\n                    </Link>\r\n                    {topic.author === user.id && <button onClick={() => deleteTopic(topic.id)} className=\"delete\"><i className=\"fa fa-trash\" aria-hidden=\"true\" /></button>}\r\n                  </article>\r\n                )}\r\n              </>\r\n              :\r\n              <section className=\"no-matches\">\r\n                <p>There is no matching topic, sorry</p>\r\n                <Link to=\"/topics\">Go to Topics</Link>\r\n              </section>\r\n      }\r\n    </main>\r\n  )\r\n\r\n  function deleteTopic(id) {\r\n    fetch(\"/api/topics\", {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Accept\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({ id })\r\n    })\r\n      .then(res => res.json())\r\n      .then(result => {\r\n        console.log(result);\r\n        client.refetchQueries(\"searchedTopics\");\r\n      })\r\n      .catch(err => console.log(err))\r\n  }\r\n}\r\n\r\nexport default TopicSearched\r\n","import React from 'react'\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport Topic from './Topic';\r\nimport TopicAll from './TopicAll';\r\nimport TopicCreate from './TopicCreate';\r\nimport TopicSearched from './TopicSearched';\r\n\r\nfunction Topics() {\r\n  return (\r\n    <Switch>\r\n      <Route exact path=\"/topics\" component={TopicAll} />\r\n      <Route path=\"/topics/create\" component={TopicCreate} />\r\n      <Route exact path=\"/topics/search/:search\" component={TopicSearched} />\r\n      <Route exact path=\"/topics/:id\" component={Topic} />\r\n    </Switch>\r\n  )\r\n}\r\n\r\nexport default Topics\r\n","import React from 'react'\r\nimport { useContext } from 'react';\r\nimport { Link } from \"react-router-dom\";\r\nimport { useQuery } from 'react-query';\r\nimport { authContext } from '../context/AuthProvider';\r\n\r\nfunction Enemies() {\r\n\r\n  const [user] = useContext(authContext);\r\n  const queryResult = useQuery(\"enemies\", () => fetch(\"/api/friends\").then(res => res.json()), { enabled: !!user.id });\r\n\r\n  return (\r\n    <main className=\"enemies\">\r\n      <h2 className=\"title\">Your enemies</h2>\r\n      {\r\n        !user.id ?\r\n          <article className=\"no-friends\">\r\n            <p>You should login to see your friends</p>\r\n            <Link to=\"/login\" className=\"login\">Login</Link>\r\n          </article>\r\n          : queryResult.isFetching ?\r\n            <div className=\"loading\">It is loading...</div>\r\n            :\r\n            queryResult.isError ?\r\n              <div className=\"error\">There was an error, please refresh</div>\r\n              :\r\n              !queryResult.data?.data.length && user.id ?\r\n                <article className=\"no-friends\">\r\n                  There are no friends to show, man.\r\n                </article>\r\n                :\r\n                queryResult.data.data.map(friend => (\r\n                  <Link to={`/users/${friend.id}`} key={friend.id} className=\"friend\">\r\n                    <img src={friend.profile_image} alt={friend.username} className=\"avatar\" />\r\n                    <div className=\"info\">\r\n                      <h3 className=\"username\">{friend.username}</h3>\r\n                      <p className=\"info\">{friend.profile_info}</p>\r\n                    </div>\r\n                  </Link>\r\n                ))\r\n      }\r\n    </main>\r\n  )\r\n}\r\n\r\nexport default Enemies\r\n","import React, { useEffect } from 'react'\r\nimport { useContext } from 'react';\r\nimport { useQuery } from 'react-query';\r\nimport { useHistory, useRouteMatch } from 'react-router-dom';\r\nimport { client } from '../../App';\r\nimport { authContext } from '../context/AuthProvider';\r\n\r\nfunction Users() {\r\n\r\n  const url = useRouteMatch();\r\n  const { id } = url.params;\r\n  const [user] = useContext(authContext);\r\n  const history = useHistory();\r\n\r\n  let anotherUser = useQuery(\"anotheruser\", () => fetch(\"/api/users/\" + id).then(res => res.json()), { cacheTime: 0 });\r\n\r\n  return (\r\n    <main className=\"profile user\">\r\n      {anotherUser.isLoading ?\r\n        <div className=\"loading\">It is loading...</div>\r\n        :\r\n        anotherUser.isError ?\r\n          <div className=\"error\">There was an error fetching. Please log out and try again</div>\r\n          :\r\n          !anotherUser.isFetching && anotherUser.data?.data ?\r\n            <>\r\n              <form>\r\n                <div className=\"avatar-section\">\r\n                  <img className=\"image-picker\" src={\"/\" + anotherUser.data.data.profile_image} alt=\"Profile\" />\r\n                </div></form>\r\n              <div className=\"content\">\r\n                <h3 className=\"name\">{anotherUser.data.data.username}</h3>\r\n                <div className=\"info\">\r\n                  <p>{anotherUser.data.data.profile_info}</p>\r\n                  {user.id &&\r\n                    JSON.parse(anotherUser.data.data.friends).includes(user.id) ?\r\n                    <button onClick={() => toggleFriend(anotherUser.data.data.id)} className=\"remove-friend\"><i className=\"fas fa-user-times\"></i></button>\r\n                    :\r\n                    <button onClick={() => toggleFriend(anotherUser.data.data.id)} className=\"add-friend\"><i className=\"fas fa-user-plus\"></i></button>\r\n                  }\r\n                </div>\r\n              </div>\r\n            </>\r\n            :\r\n            <></>\r\n      }\r\n    </main>\r\n  )\r\n\r\n  function toggleFriend(id) {\r\n    if (!user.id) history.push(\"/login\");\r\n    fetch(\"/api/friends\", {\r\n      method: \"PUT\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Accept\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({ id })\r\n    })\r\n      .then(res => res.json())\r\n      .then(result => {\r\n        console.log(result);\r\n        client.refetchQueries(\"anotheruser\");\r\n      })\r\n      .catch(err => console.log(err))\r\n  }\r\n}\r\n\r\nexport default Users\r\n","import React, { useContext } from 'react'\r\nimport { Redirect, Route, useLocation } from 'react-router';\r\nimport { authContext } from '../context/AuthProvider'\r\n\r\nfunction PrivateRoute(props) {\r\n\r\n  const [user] = useContext(authContext);\r\n  const {logged} = user;\r\n  const location = useLocation();\r\n\r\n  return ( \r\n    <>\r\n    {logged ? \r\n      <Route {...props} />\r\n      :\r\n      <Redirect to={\r\n        {pathname: \"/login\", state: {from: location}}\r\n      } />\r\n    }\r\n    </>\r\n  )\r\n}\r\n\r\nexport default PrivateRoute\r\n","import React, { useContext } from 'react'\r\nimport { Redirect, Route, useLocation } from 'react-router';\r\nimport { authContext } from '../context/AuthProvider'\r\n\r\nfunction PublicRoute(props) {\r\n\r\n  const [ user ] = useContext(authContext);\r\n  console.log(user.logged ? \"Already logged\" : \"Isnt logged yet\");\r\n  const { logged } = user;\r\n\r\n  return ( \r\n    <>\r\n    {!logged ? \r\n      <Route {...props} />\r\n      :\r\n      <Redirect to={\r\n        { pathname: \"/\" }\r\n      } />\r\n    }\r\n    </>\r\n  )\r\n}\r\n\r\nexport default PublicRoute\r\n","import React, { useState } from 'react'\r\n\r\nfunction SendReset() {\r\n\r\n  const [email, setEmail] = useState(\"\");\r\n  const [fetching, setFetching] = useState(false);\r\n  const [done, setDone] = useState(false);\r\n\r\n  return (\r\n    <main className=\"reset-form\">\r\n      <h3 className=\"title\">Reset Password</h3>\r\n      {done ?\r\n        <p className=\"done\">The email has been sent. Go to check it out</p>\r\n        :\r\n        <form>\r\n          <input onChange={(e) => setEmail(e.target.value)} value={email} type=\"email\" placeholder=\"Email\" />\r\n          <button onClick={sendResetPassRequest} className=\"reset\">Send Reset Request</button>\r\n        </form>\r\n      }\r\n      {fetching && <p className=\"loading\">Is loading...</p>}\r\n    </main>\r\n  )\r\n\r\n  function sendResetPassRequest(e) {\r\n    e.preventDefault();\r\n    if (fetching) return;\r\n    setFetching(true);\r\n    fetch(\"/api/users/reset\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Accept\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({ email })\r\n    })\r\n      .then(res => res.json())\r\n      .then(result => {\r\n        console.log(result);\r\n        if(!result.error) setDone(true);\r\n      })\r\n      .catch(err => console.log(err))\r\n      .finally(() => {\r\n        setFetching(false);\r\n      })\r\n  }\r\n}\r\n\r\nexport default SendReset\r\n","import React, { useState } from 'react';\r\nimport { Link, useRouteMatch } from \"react-router-dom\";\r\n\r\nfunction ResetPass() {\r\n\r\n  const [password, setPassword] = useState(\"\");\r\n  const [fetching, setFetching] = useState(false);\r\n  const [done, setDone] = useState(false);\r\n\r\n  const url = useRouteMatch();\r\n  const { params } = url;\r\n  const searchParams = new URLSearchParams(params.algo);\r\n  const resetKey = searchParams.get(\"resetKey\");\r\n  const id = searchParams.get(\"id\");\r\n\r\n  return (\r\n    <main className=\"reset-form\">\r\n      <h3 className=\"title\">Reset Password</h3>\r\n      {done ?\r\n      <>\r\n      \r\n      <p className=\"done\">The password has been updated</p>\r\n      <Link to=\"/login\">Login</Link>\r\n      </>\r\n        :\r\n        <form>\r\n          <input onChange={(e) => setPassword(e.target.value)} value={password} type=\"password\" placeholder=\"Password\" />\r\n          <button onClick={sendUpdatedPassword} className=\"reset-password\">Reset Password</button>\r\n        </form>\r\n      }\r\n      {fetching && <p className=\"loading\">Is loading...</p>}\r\n    </main>\r\n  )\r\n\r\n  function sendUpdatedPassword(e) {\r\n    e.preventDefault();\r\n    if (fetching) return;\r\n    setFetching(true);\r\n    fetch(\"/api/users/reset\", {\r\n      method: \"PUT\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Accept\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({ password, resetKey, id })\r\n    })\r\n      .then(res => res.json())\r\n      .then(result => {\r\n        console.log(result);\r\n        if(!result.error) setDone(true);\r\n      })\r\n      .catch(err => console.log(err))\r\n      .finally(() => {\r\n        setFetching(false);\r\n      })\r\n  }\r\n}\r\n\r\nexport default ResetPass\r\n","import React from 'react';\r\nimport { Switch, Route } from \"react-router-dom\";\r\nimport Home from '../pages/Home';\r\nimport Login from '../pages/Login';\r\nimport Profile from '../pages/Profile';\r\nimport Register from '../pages/Register';\r\nimport Topics from '../pages/Topics';\r\nimport Enemies from '../pages/Enemies';\r\nimport Users from '../pages/Users';\r\nimport PrivateRoute from './PrivateRoute';\r\nimport PublicRoute from './PublicRoute';\r\nimport SendReset from '../pages/SendReset';\r\nimport ResetPass from '../pages/ResetPass';\r\n\r\nfunction AllRoutes() {\r\n  return (\r\n    <Switch>\r\n      <Route exact path=\"/\" component={Home} />\r\n      <PublicRoute path=\"/login\" component={Login} />\r\n      <PublicRoute path=\"/register\" component={Register} />\r\n      <PublicRoute path=\"/reset/:algo\" component={ResetPass} />\r\n      <PublicRoute exact path=\"/reset\" component={SendReset} />\r\n      <PrivateRoute path=\"/profile\" component={Profile} />\r\n      <Route path=\"/topics\" component={Topics} />\r\n      <Route path=\"/enemies\" component={Enemies} />\r\n      <Route path=\"/users/:id\" component={Users} />\r\n    </Switch>\r\n  )\r\n}\r\n\r\nexport default AllRoutes\r\n","import React from \"react\";\r\nimport {\r\n  BrowserRouter as Router,\r\n} from \"react-router-dom\";\r\nimport Header from \"./scripts/components/Header\";\r\nimport AuthProvider from \"./scripts/context/AuthProvider\";\r\nimport SearchProvider from \"./scripts/context/SearchProvider\";\r\nimport AllRoutes from \"./scripts/routes/AllRoutes\";\r\nimport { QueryClientProvider, QueryClient } from \"react-query\";\r\n\r\n\r\nconst client = new QueryClient();\r\nexport { client }\r\n\r\nfunction App() {\r\n\r\n  return (\r\n    <QueryClientProvider client={client}>\r\n      <Router>\r\n        <SearchProvider>\r\n          <AuthProvider>\r\n            <Header />\r\n            <AllRoutes />\r\n          </AuthProvider>\r\n        </SearchProvider>\r\n      </Router>\r\n    </QueryClientProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles.css';\nimport App from './App';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);"],"sourceRoot":""}