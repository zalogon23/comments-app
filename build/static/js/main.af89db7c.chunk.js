(this["webpackJsonpcomments-app"]=this["webpackJsonpcomments-app"]||[]).push([[0],{26:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var c=a(1),s=a(19),n=a.n(s),i=(a(26),a(5)),o=a(3),r=a(2),l=a(9),u=a(0),j=Object(c.createContext)();var m=function(e){var t=e.children,a=Object(c.useState)({logged:!0}),s=Object(o.a)(a,2),n=s[0],i=s[1];return function(){if(console.log(n),!1===n.logged)return;if(n.id)return;fetch("/profile",{method:"POST"}).then((function(e){return e.json()})).then((function(e){console.log(e),e.message?i({logged:!1}):e.id+100?(i(Object(l.a)(Object(l.a)({},e),{},{logged:!0})),console.log("Seteamos el user: "+e)):i({logged:!1})})).catch((function(e){e&&i({logged:!1})}))}(),Object(u.jsx)(j.Provider,{value:[n,i],children:t})};var d=function(){var e=Object(c.useContext)(j),t=Object(o.a)(e,2),a=t[0],s=t[1],n=Object(r.h)().pathname;return Object(u.jsxs)("header",{className:"main-header",children:[0!==n.indexOf("/login")&&(a.logged?Object(u.jsx)("button",{onClick:function(){fetch("/logout",{method:"POST"}).then((function(e){return s({logged:!1})}))},className:"logout",children:"Log Out"}):Object(u.jsx)(i.b,{to:"/login",className:"login",children:"Log In"})),Object(u.jsx)("h1",{className:"title",children:"COMMENTS APP"}),Object(u.jsxs)("div",{className:"comment",children:[Object(u.jsx)("input",{type:"text",placeholder:"Look for a topic..."}),Object(u.jsx)("button",{className:"add add-main",children:Object(u.jsx)("i",{className:"fas fa-search"})})]}),Object(u.jsx)("nav",{children:Object(u.jsxs)("ul",{children:[Object(u.jsx)(i.c,{activeClassName:"here",exact:!0,to:"/",children:"Home"}),Object(u.jsx)(i.c,{activeClassName:"here",to:"/profile",children:"Profile"}),Object(u.jsx)(i.c,{activeClassName:"here",to:"/topics",children:"Topics"}),Object(u.jsx)(i.c,{activeClassName:"here",to:"/enemies",children:"Enemies"})]})})]})};var b=function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("main",{className:"home",children:Object(u.jsxs)("div",{className:"content",children:[Object(u.jsx)("h2",{className:"title",children:"Prepare to discuss"}),Object(u.jsx)("p",{className:"intro",children:"Este sitio fue ideado con la premisa de que a todos les gusta hablar mal de algo. Y debido a lo comun que es, he considerado necesario declararlo como un Derecho Humano, el derecho de quejarse de todo. Por lo anterior, esta plataforma simplemente se presenta como un medio de descarga emocional, y... por que no (en el mejor de los casos) como punto de discusiones constructivas y tertulias amenas."}),Object(u.jsxs)("div",{className:"random",children:[Object(u.jsx)("span",{children:"Random Discussion"}),Object(u.jsx)("button",{className:"go-to-comments",children:"Join"})]})]})}),Object(u.jsxs)("section",{className:"hottest-topics",children:[Object(u.jsx)("article",{className:"topic",children:"Games"}),Object(u.jsx)("article",{className:"topic",children:"War"}),Object(u.jsx)("article",{className:"topic",children:"Heroes"}),Object(u.jsx)("article",{className:"topic",children:"Religion"})]})]})};var h=function(e,t){e.id||fetch("/profile",{method:"POST"}).then((function(e){return e.json()})).then((function(e){console.log(e),e.message||e.id+100&&t.replace("/")}))};var p=function(){var e=Object(c.useContext)(j),t=Object(o.a)(e,2),a=t[0],s=t[1],n=Object(c.useState)(""),m=Object(o.a)(n,2),d=m[0],b=m[1],p=Object(c.useState)(""),O=Object(o.a)(p,2),f=O[0],g=O[1],x=Object(c.useState)(""),v=Object(o.a)(x,2),N=v[0],C=v[1],S=(Object(r.h)().state||{from:{pathname:"/"}}).from,y=Object(r.g)();return Object(c.useEffect)((function(){h(a,y)}),[]),Object(u.jsxs)("main",{className:"login-form",children:[Object(u.jsx)("h3",{className:"title",children:"Login"}),Object(u.jsxs)("form",{children:[Object(u.jsx)("input",{style:"username"===N?{backgroundColor:"#fbb"}:{},onChange:function(e){return b(e.target.value)},value:d,type:"text",className:"username",placeholder:"Username"}),Object(u.jsx)("input",{style:"password"===N?{backgroundColor:"#fbb"}:{},onChange:function(e){return g(e.target.value)},value:f,type:"password",className:"password",placeholder:"Password"}),Object(u.jsx)("button",{onClick:function(e){e.preventDefault(),fetch("/login",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({username:d,password:f})}).then((function(e){return e.json()})).then((function(e){if(!e.problem)return s(Object(l.a)(Object(l.a)({},e),{},{logged:!0})),console.log(e),void y.replace(S);console.log(e),"username"===e.problem&&C("username"),"password"===e.problem&&C("password")})).catch((function(e){e&&console.log(e)}))},className:"login",children:"Login"})]}),Object(u.jsxs)("div",{className:"register-now",children:[Object(u.jsx)("span",{children:" Have not an account yet? "}),Object(u.jsx)(i.b,{to:"/register",children:"Sign In"})]})]})};var O=function(){var e=Object(r.g)(),t=Object(c.useContext)(j),a=Object(o.a)(t,2),s=a[0],n=(a[1],Object(c.useState)("")),i=Object(o.a)(n,2),l=i[0],m=i[1],d=Object(c.useState)(""),b=Object(o.a)(d,2),p=b[0],O=b[1];return Object(c.useEffect)((function(){h(s,e)}),[]),Object(u.jsxs)("main",{className:"register-form",children:[Object(u.jsx)("h3",{className:"title",children:"Register"}),Object(u.jsxs)("form",{children:[Object(u.jsx)("input",{onChange:function(e){return m(e.target.value)},type:"text",className:"username",placeholder:"Username",value:l}),Object(u.jsx)("input",{onChange:function(e){return O(e.target.value)},type:"password",className:"password",placeholder:"Password",value:p}),Object(u.jsx)("button",{onClick:function(t){t.preventDefault(),fetch("/register",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({username:l,password:p})}).then((function(e){return e.json()})).then((function(t){console.log(t),t.problem||e.replace("/login")})).catch((function(e){console.log(e),e&&console.log("No se pudo enviar la data...")}))},className:"register",children:"Register"})]})]})},f=a(21);var g=function e(t){var a=t.source,s=Object(c.useState)(!1),n=Object(o.a)(s,2),i=n[0],r=n[1],l=Object(c.useState)(!1),j=Object(o.a)(l,2),m=j[0],d=j[1],b=Object(c.useState)([]),h=Object(o.a)(b,2),p=h[0],O=h[1],g=Object(c.useRef)();return Object(c.useEffect)((function(){console.log(document.activeElement),document.activeElement.blur()})),Object(u.jsxs)("article",{ref:g,className:"comment ".concat(a.id),children:[Object(u.jsx)("h4",{className:"author",children:a.author}),Object(u.jsx)("p",{className:"content",children:a.content}),Object(u.jsx)("ul",{className:"actions",children:i?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("input",{type:"text",className:"answer-comment"}),Object(u.jsx)("button",{onClick:function(){var e=g.current;console.log(e);var t={id:3,content:e.querySelector(".answer-comment").value,author:"espera",parent:"espera"};O([].concat(Object(f.a)(p),[t])),r(!1),d(!0)},className:"send-answer-comment",children:"Send"}),Object(u.jsx)("button",{onClick:function(){r(!1)},className:"abort-answer-comment",children:"\xd7"})]}):Object(u.jsxs)(u.Fragment,{children:[!!p.length&&Object(u.jsx)("button",{onClick:function(){return d(!m)},className:"see-more",children:"..."}),Object(u.jsx)("button",{onClick:function(){r(!0)},className:"answer",children:"+"})]})}),Object(u.jsx)("ol",{className:"children",children:!!p.length&&m&&p.map((function(t){return Object(u.jsx)(e,{source:t},t.id)}))})]})};var x=function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("main",{className:"topic",children:[Object(u.jsx)("h3",{className:"title",children:"Topic!"}),Object(u.jsx)("p",{className:"intro",children:"algo bacano"})]}),Object(u.jsx)("section",{className:"comments",children:[{id:1,author:"Pepe",children:!1,commentMode:!1,content:"Estas loco oe sonso"},{id:2,author:"Mujica",children:!1,commentMode:!1,content:"Pelead entre vosotros hermanos..."}].map((function(e){return!e.parent&&Object(u.jsx)(g,{source:e},e.id)}))})]})};var v=function(){var e=Object(c.useState)([{title:"Guerra",id:1,founder:"Nicola Tesla",rating:3,intro:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Commodi temporibus harum eos necessitatibus voluptatum aspernatur suscipit consectetur excepturi, pariatur deleniti error voluptas fuga assumenda! Sequi illo dolores laboriosam, magni voluptatibus veniam deleniti minima. Dolores autem deserunt mollitia atque officiis. Quia maiores, quo accusamus aut vel enim voluptatibus aperiam recusandae ipsum?"},{title:"Muerte",id:2,founder:"Elon Musk",rating:2,intro:"Lorem ipsudfsdjfhjdghgj quehsle fhgfy consectetur excepturi, pariatur deleniti error voluptas fuga assumenda! Sequi illo dolores laboriosam, magni voluptatibus veniam deleniti minima. Dolores autem deserunt mollitia atque officiis.Lorem ipsudfsdjfhjdghgj quehsle fhgfy consectetur excepturi, pariatur deleniti error voluptas fuga assumenda! Sequi illo dolores laboriosam, magni voluptatibus veniam deleniti minima. Dolores autem deserunt mollitia atque officiis. Quia maiores, quo accusamus aut vel enim voluptatibus aperiam recusandae ipsum? Quia maiores, quo accusamus aut vel enim voluptatibus aperiam recusandae ipsum?"},{title:"Guerra",id:3,founder:"Nicola Tesla",rating:3,intro:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Commodi temporibus harum eos necessitatibus voluptatum aspernatur suscipit consectetur excepturi, pariatur deleniti error voluptas fuga assumenda! Sequi illo dolores laboriosam, magni voluptatibus veniam deleniti minima. Dolores autem deserunt mollitia atque officiis. Quia maiores, quo accusamus aut vel enim voluptatibus aperiam recusandae ipsum?"},{title:"Muerte",id:4,founder:"Elon Musk",rating:1,intro:"Lorem ipsudfsdjfhjdghgj quehsle fhgfy consectetur excepturi, pariatur deleniti error voluptas fuga assumenda! Sequi illo dolores laboriosam, magni voluptatibus veniam deleniti minima. Dolores autem deserunt mollitia atque officiis. Quia maiores, quo accusamus aut vel enim voluptatibus aperiam recusandae ipsum?"}]),t=Object(o.a)(e,2),a=t[0],s=(t[1],Object(r.i)().path);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(r.b,{exact:!0,path:s,children:Object(u.jsx)("main",{className:"topics",children:a.map((function(e){return Object(u.jsx)(i.b,{to:"".concat(s,"/").concat(e.id),children:Object(u.jsxs)("article",{className:"topic ".concat(e.id),children:[Object(u.jsx)("div",{className:"rating",children:[1,2,3,4,5].map((function(t){return t<=e.rating?Object(u.jsx)("i",{className:"fas fa-star"},t):Object(u.jsx)("i",{className:"far fa-star"},t+100)}))}),Object(u.jsx)("h3",{className:"title",children:e.title}),Object(u.jsx)("p",{className:"content",children:e.intro}),Object(u.jsx)("h4",{className:"founder",children:e.founder})]})},e.id)}))})}),Object(u.jsx)(r.b,{path:"".concat(s,"/:id"),component:x})]})};var N=function(e){var t=Object(c.useContext)(j),a=Object(o.a)(t,1)[0].logged,s=Object(r.h)();return console.log(s),Object(u.jsx)(u.Fragment,{children:a?Object(u.jsx)(r.b,Object(l.a)({},e)):Object(u.jsx)(r.a,{to:{pathname:"/login",state:{from:s}}})})},C=a.p+"static/media/profile.eba9ed41.png";function S(){document.querySelector(".image-picker-input").click()}var y=function(){var e,t,a=Object(c.useContext)(j),s=Object(o.a)(a,1)[0],n=Object(c.useState)(null!==(e=s.profile_image)&&void 0!==e?e:C),i=Object(o.a)(n,2),r=i[0],l=i[1],m=Object(c.useState)("watch"),d=Object(o.a)(m,2),b=d[0],h=d[1];return Object(u.jsxs)("main",{className:"profile",children:[Object(u.jsxs)("div",{className:"avatar-section",children:[Object(u.jsx)("img",{onClick:S,className:"image-picker",src:r,alt:"Profile"}),Object(u.jsx)("i",{className:"fas fa-camera change-image"}),Object(u.jsx)("input",{onChange:function(e){return function(e,t){var a=e.target.files[0];if("image/svg+xml"!==a.type){var c=new Blob([a]);t(URL.createObjectURL(c))}}(e,l)},className:"image-picker-input",accept:"image/*",type:"file"})]}),Object(u.jsxs)("div",{className:"content",children:[Object(u.jsx)("h3",{className:"name",children:s.username}),Object(u.jsx)("div",{className:"info",children:"watch"===b?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("p",{children:null!==(t=s.profile_info)&&void 0!==t?t:"Waiting..."}),Object(u.jsx)("button",{onClick:function(){return h("watch"===b?"edit":"watch")},className:"edit",children:"Edit"})]}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("textarea",{className:"set-personal-info"}),Object(u.jsx)("button",{className:"set",children:"Set"}),Object(u.jsx)("button",{className:"cancel",children:"Cancel"})]})}),Object(u.jsxs)("div",{style:{display:"none"},className:"trophies",children:[Object(u.jsx)("div",{className:"trophy speaker",children:"M"}),Object(u.jsx)("div",{className:"trophy devil",children:"M"}),Object(u.jsx)("div",{className:"trophy badass",children:"M"})]})]})]})};var q=function(){var e=Object(r.i)().path;return Object(u.jsx)(r.d,{children:Object(u.jsx)(N,{exact:!0,path:"".concat(e),component:y})})};var w=function(){return Object(u.jsxs)(r.d,{children:[Object(u.jsx)(r.b,{exact:!0,path:"/",component:b}),Object(u.jsx)(r.b,{path:"/login",component:p}),Object(u.jsx)(r.b,{path:"/register",component:O}),Object(u.jsx)(r.b,{path:"/profile",component:q}),Object(u.jsx)(r.b,{path:"/topics",component:v})]})};var k=function(){return Object(u.jsx)(m,{children:Object(u.jsxs)(i.a,{children:[Object(u.jsx)(d,{}),Object(u.jsx)(w,{})]})})};n.a.render(Object(u.jsx)(k,{}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.af89db7c.chunk.js.map